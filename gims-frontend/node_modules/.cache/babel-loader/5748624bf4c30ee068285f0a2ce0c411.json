{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import'./usercard.css';import{useCookies}from'react-cookie';import AccountBoxIcon from'@mui/icons-material/AccountBox';import BadgeIcon from'@mui/icons-material/Badge';import{useLoading}from'../../contexts/LoadingContext';import{useConfirm}from'../../contexts/ConfirmContext';import{useAlert}from'../../contexts/AlertContext';import RemoveUser from'../../functions/RemoveUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserCard(props){var username=props.username,role=props.role;var _useCookies=useCookies(['access-token']),_useCookies2=_slicedToArray(_useCookies,1),cookies=_useCookies2[0];var _useLoading=useLoading(),setLoading=_useLoading.setLoading;var _useConfirm=useConfirm(),confirm=_useConfirm.confirm,setConfirm=_useConfirm.setConfirm;var _useAlert=useAlert(),setAlert=_useAlert.setAlert;function removeUser(_x,_x2){return _removeUser.apply(this,arguments);}function _removeUser(){_removeUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,token){var removeUserRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return RemoveUser(user,token);case 3:removeUserRes=_context.sent;if(removeUserRes==='complete'){window.location.reload();}else{setAlert({active:true,message:'Error! can not remover user.\\ntry again later.'});}setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return _removeUser.apply(this,arguments);}useEffect(function(){if(confirm.status==='confirm'&&confirm.action===\"remove \".concat(username)){removeUser(username,cookies['access-token']);setConfirm({active:false,message:'',action:'',status:''});}},[confirm.status]);return/*#__PURE__*/_jsx(\"div\",{className:\"user-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-card-icon\",children:role==='owner'?/*#__PURE__*/_jsx(AccountBoxIcon,{sx:{fontSize:50}}):/*#__PURE__*/_jsx(BadgeIcon,{sx:{fontSize:50}})}),/*#__PURE__*/_jsx(\"div\",{className:\"user-card-username\",children:username}),/*#__PURE__*/_jsx(\"div\",{className:\"user-card-role\",children:role}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-user-button\",type:\"button\",onClick:function onClick(){setConfirm({active:true,message:\"confirm \".concat(role,\" \").concat(username,\"?\"),action:\"remove \".concat(username),status:''});},children:\"remove\"})]})});}export default UserCard;","map":{"version":3,"names":["React","useEffect","useCookies","AccountBoxIcon","BadgeIcon","useLoading","useConfirm","useAlert","RemoveUser","UserCard","props","username","role","cookies","setLoading","confirm","setConfirm","setAlert","removeUser","user","token","removeUserRes","window","location","reload","active","message","status","action","fontSize"],"sources":["/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/src/components/usercard/UserCard.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport './usercard.css';\nimport { useCookies } from 'react-cookie';\n\nimport AccountBoxIcon from '@mui/icons-material/AccountBox';\nimport BadgeIcon from '@mui/icons-material/Badge';\n\nimport { useLoading } from '../../contexts/LoadingContext';\nimport { useConfirm } from '../../contexts/ConfirmContext';\nimport { useAlert } from '../../contexts/AlertContext';\n\nimport RemoveUser from '../../functions/RemoveUser';\n\nfunction UserCard(props: {username: any, role: any}) {\n  const { username, role }: {username: any, role: any} = props;\n\n  const [cookies] = useCookies(['access-token']);\n\n  const { setLoading } = useLoading();\n  const { confirm, setConfirm } = useConfirm();\n  const { setAlert } = useAlert();\n\n  async function removeUser(user: string, token: string) {\n    setLoading(true);\n    const removeUserRes = await RemoveUser(user, token);\n    if (removeUserRes === 'complete') {\n      window.location.reload();\n    } else {\n      setAlert({\n        active: true,\n        message: 'Error! can not remover user.\\ntry again later.'\n      });\n    }\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    if (confirm.status === 'confirm' && confirm.action === `remove ${username}`) {\n      removeUser(username, cookies['access-token']);\n      setConfirm({\n        active: false,\n        message: '',\n        action: '',\n        status: ''\n      });\n    }\n  }, [confirm.status]);\n\n  return (\n    <div className=\"user-card\">\n      <div className=\"user-card-content\">\n        <div className=\"user-card-icon\">\n          {role === 'owner'\n            ? <AccountBoxIcon sx={{ fontSize: 50 }} />\n            : <BadgeIcon sx={{ fontSize: 50 }} />}\n        </div>\n        <div className=\"user-card-username\">\n          {username}\n        </div>\n        <div className=\"user-card-role\">\n          {role}\n        </div>\n        <button\n          className=\"remove-user-button\"\n          type=\"button\"\n          onClick={() => {\n            setConfirm({\n              active: true,\n              message: `confirm ${role} ${username}?`,\n              action: `remove ${username}`,\n              status: ''\n            });\n          }}\n        >\n          remove\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default UserCard;\n"],"mappings":"ueAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAO,gBAAgB,CACvB,OAASC,UAAU,KAAQ,cAAc,CAEzC,MAAOC,eAAc,KAAM,gCAAgC,CAC3D,MAAOC,UAAS,KAAM,2BAA2B,CAEjD,OAASC,UAAU,KAAQ,+BAA+B,CAC1D,OAASC,UAAU,KAAQ,+BAA+B,CAC1D,OAASC,QAAQ,KAAQ,6BAA6B,CAEtD,MAAOC,WAAU,KAAM,4BAA4B,CAAC,wFAEpD,QAASC,SAAQ,CAACC,KAAiC,CAAE,CACnD,GAAQC,SAAQ,CAAuCD,KAAK,CAApDC,QAAQ,CAAEC,IAAI,CAAiCF,KAAK,CAA1CE,IAAI,CAEtB,gBAAkBV,UAAU,CAAC,CAAC,cAAc,CAAC,CAAC,4CAAvCW,OAAO,iBAEd,gBAAuBR,UAAU,EAAE,CAA3BS,UAAU,aAAVA,UAAU,CAClB,gBAAgCR,UAAU,EAAE,CAApCS,OAAO,aAAPA,OAAO,CAAEC,UAAU,aAAVA,UAAU,CAC3B,cAAqBT,QAAQ,EAAE,CAAvBU,QAAQ,WAARA,QAAQ,CAAgB,QAEjBC,WAAU,gJAAzB,iBAA0BC,IAAY,CAAEC,KAAa,sIACnDN,UAAU,CAAC,IAAI,CAAC,CAAC,sBACWN,WAAU,CAACW,IAAI,CAAEC,KAAK,CAAC,QAA7CC,aAAa,eACnB,GAAIA,aAAa,GAAK,UAAU,CAAE,CAChCC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC1B,CAAC,IAAM,CACLP,QAAQ,CAAC,CACPQ,MAAM,CAAE,IAAI,CACZC,OAAO,CAAE,gDACX,CAAC,CAAC,CACJ,CACAZ,UAAU,CAAC,KAAK,CAAC,CAAC,sDACnB,6CAEDb,SAAS,CAAC,UAAM,CACd,GAAIc,OAAO,CAACY,MAAM,GAAK,SAAS,EAAIZ,OAAO,CAACa,MAAM,oBAAejB,QAAQ,CAAE,CAAE,CAC3EO,UAAU,CAACP,QAAQ,CAAEE,OAAO,CAAC,cAAc,CAAC,CAAC,CAC7CG,UAAU,CAAC,CACTS,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,EAAE,CACXE,MAAM,CAAE,EAAE,CACVD,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACZ,OAAO,CAACY,MAAM,CAAC,CAAC,CAEpB,mBACE,YAAK,SAAS,CAAC,WAAW,uBACxB,aAAK,SAAS,CAAC,mBAAmB,wBAChC,YAAK,SAAS,CAAC,gBAAgB,UAC5Bf,IAAI,GAAK,OAAO,cACb,KAAC,cAAc,EAAC,EAAE,CAAE,CAAEiB,QAAQ,CAAE,EAAG,CAAE,EAAG,cACxC,KAAC,SAAS,EAAC,EAAE,CAAE,CAAEA,QAAQ,CAAE,EAAG,CAAE,EAAG,EACnC,cACN,YAAK,SAAS,CAAC,oBAAoB,UAChClB,QAAQ,EACL,cACN,YAAK,SAAS,CAAC,gBAAgB,UAC5BC,IAAI,EACD,cACN,eACE,SAAS,CAAC,oBAAoB,CAC9B,IAAI,CAAC,QAAQ,CACb,OAAO,CAAE,kBAAM,CACbI,UAAU,CAAC,CACTS,MAAM,CAAE,IAAI,CACZC,OAAO,mBAAad,IAAI,aAAID,QAAQ,KAAG,CACvCiB,MAAM,kBAAYjB,QAAQ,CAAE,CAC5BgB,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CAAE,oBAGK,GACL,EACF,CAEV,CAEA,cAAelB,SAAQ"},"metadata":{},"sourceType":"module"}