{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chalanthornaenguthaivadt/Desktop/Thesis/Gold-Inventory-Management-System/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chalanthornaenguthaivadt/Desktop/Thesis/Gold-Inventory-Management-System/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chalanthornaenguthaivadt/Desktop/Thesis/Gold-Inventory-Management-System/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./readserialnumbermodal.css';import{useCookies}from'react-cookie';import SetSerialNumber from'../../functions/SetSerialNumber';import{useLoading}from'../../contexts/LoadingContext';import{useAlert}from'../../contexts/AlertContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReadSerialNumberModal(props){var inventoryId=props.inventoryId,active=props.active,action=props.action;var _useCookies=useCookies(['access-token']),_useCookies2=_slicedToArray(_useCookies,1),cookies=_useCookies2[0];var _useLoading=useLoading(),setLoading=_useLoading.setLoading;var _useAlert=useAlert(),setAlert=_useAlert.setAlert;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),serialNumber=_useState2[0],setSerialNumber=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activeReadSerial=_useState4[0],setActiveReadSerial=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),focusReadSerialRef=_useState6[0],setFocusReadSerialRef=_useState6[1];function setSerial(){return _setSerial.apply(this,arguments);}function _setSerial(){_setSerial=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var setSerialRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);if(!(inventoryId!==0&&!Number.isNaN(serialNumber))){_context.next=10;break;}if(!(action==='set')){_context.next=9;break;}_context.next=5;return SetSerialNumber(inventoryId,Number(serialNumber),cookies['access-token']);case 5:setSerialRes=_context.sent;if(setSerialRes==='complete'){setActiveReadSerial(false);setSerialNumber('');}_context.next=10;break;case 9:setAlert({active:true,message:'Error! can not set serial number.'});case 10:setLoading(false);case 11:case\"end\":return _context.stop();}}},_callee);}));return _setSerial.apply(this,arguments);}useEffect(function(){if(inventoryId!==0){setActiveReadSerial(true);}},[inventoryId,active]);return/*#__PURE__*/_jsx(\"div\",{className:\"modal-bg read-serial-addnew \".concat(activeReadSerial?'active':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-content read-serial-addnew \".concat(activeReadSerial?'active':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-content-header\",children:\"scan RFID tag\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\\n              notice focus-read-serial\\n              \".concat(focusReadSerialRef?'':'active',\"\\n            \"),children:\"click on input box\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputbox read-serial\",type:\"text\",maxLength:10,value:serialNumber,onChange:function onChange(e){setSerialNumber(e.target.value);},onFocus:function onFocus(){setFocusReadSerialRef(true);},onBlur:function onBlur(){setFocusReadSerialRef(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"read-serial button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button-confirm\",type:\"button\",disabled:serialNumber==='',onClick:function onClick(){setSerial();},children:\"done\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-cancel\",type:\"button\",onClick:function onClick(){setSerialNumber('');setActiveReadSerial(false);},children:\"cancle\"})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","useCookies","SetSerialNumber","useLoading","useAlert","ReadSerialNumberModal","props","inventoryId","active","action","cookies","setLoading","setAlert","serialNumber","setSerialNumber","activeReadSerial","setActiveReadSerial","focusReadSerialRef","setFocusReadSerialRef","setSerial","Number","isNaN","setSerialRes","message","e","target","value"],"sources":["/Users/chalanthornaenguthaivadt/Desktop/Thesis/Gold-Inventory-Management-System/src/components/readserialnumber/ReadSerialNumberModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './readserialnumbermodal.css';\nimport { useCookies } from 'react-cookie';\n\nimport SetSerialNumber from '../../functions/SetSerialNumber';\n\nimport { useLoading } from '../../contexts/LoadingContext';\nimport { useAlert } from '../../contexts/AlertContext';\n\nexport default function ReadSerialNumberModal(\n  props: {\n    inventoryId: number,\n    active: boolean,\n    action: string\n  }\n) {\n  const { inventoryId, active, action }:\n  { inventoryId: number, active: boolean, action: string } = props;\n\n  const [cookies] = useCookies(['access-token']);\n\n  const { setLoading } = useLoading();\n  const { setAlert } = useAlert();\n\n  const [serialNumber, setSerialNumber] = useState<string>('');\n  const [activeReadSerial, setActiveReadSerial] = useState<boolean>(false);\n  const [focusReadSerialRef, setFocusReadSerialRef] = useState<boolean>(false);\n\n  async function setSerial() {\n    setLoading(true);\n    if (inventoryId !== 0 && !Number.isNaN(serialNumber)) {\n      if (action === 'set') {\n        const setSerialRes = await SetSerialNumber(inventoryId, Number(serialNumber), cookies['access-token']);\n        if (setSerialRes === 'complete') {\n          setActiveReadSerial(false);\n          setSerialNumber('');\n        }\n      } else {\n        setAlert({\n          active: true,\n          message: 'Error! can not set serial number.'\n        });\n      }\n    }\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    if (inventoryId !== 0) {\n      setActiveReadSerial(true);\n    }\n  }, [inventoryId, active]);\n\n  return (\n    <div className={`modal-bg read-serial-addnew ${activeReadSerial ? 'active' : ''}`}>\n      <div className={`page-content read-serial-addnew ${activeReadSerial ? 'active' : ''}`}>\n        <div className=\"page-content-header\">\n          scan RFID tag\n        </div>\n        <div\n          className={`\n              notice focus-read-serial\n              ${focusReadSerialRef ? '' : 'active'}\n            `}\n        >\n          click on input box\n        </div>\n        <input\n          className=\"inputbox read-serial\"\n          type=\"text\"\n          maxLength={10}\n          value={serialNumber}\n          onChange={(e) => { setSerialNumber(e.target.value); }}\n          onFocus={() => { setFocusReadSerialRef(true); }}\n          onBlur={() => { setFocusReadSerialRef(false); }}\n        />\n        <div className=\"read-serial button-group\">\n          <button\n            className=\"button-confirm\"\n            type=\"button\"\n            disabled={serialNumber === ''}\n            onClick={() => { setSerial(); }}\n          >\n            done\n          </button>\n          <button\n            className=\"button-cancel\"\n            type=\"button\"\n            onClick={() => {\n              setSerialNumber('');\n              setActiveReadSerial(false);\n            }}\n          >\n            cancle\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}