{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./bottomnav.css';import{Link,useLocation,useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import MenuIcon from'@mui/icons-material/Menu';import CloseIcon from'@mui/icons-material/Close';import LogoutIcon from'@mui/icons-material/Logout';import selectMenuForUser from'../../functions/SelectMenuForUser';import{GetUserProfile}from'../../functions/GetData';import{useConfirm}from'../../contexts/ConfirmContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BottomNav(){var location=useLocation();var navigate=useNavigate();var _useCookies=useCookies(['access-token']),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],removeCookie=_useCookies2[2];var _useConfirm=useConfirm(),confirm=_useConfirm.confirm,setConfirm=_useConfirm.setConfirm;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),activeHamburger=_useState2[0],setActiveHamburger=_useState2[1];var _useState3=useState(location.pathname),_useState4=_slicedToArray(_useState3,2),isActive=_useState4[0],setIsActive=_useState4[1];var _useState5=useState({username:'',role:''}),_useState6=_slicedToArray(_useState5,2),userProfile=_useState6[0],setUserProfile=_useState6[1];useEffect(function(){GetUserProfile(cookies['access-token']).then(function(res){setUserProfile({username:res.username,role:res.role});});},[]);function handleClick(path){setIsActive(path);navigate(path);setActiveHamburger(false);}function logoutAccount(){return _logoutAccount.apply(this,arguments);}function _logoutAccount(){_logoutAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setConfirm({active:true,message:'continue sign out ?',action:'logout',status:''});case 1:case\"end\":return _context.stop();}}},_callee);}));return _logoutAccount.apply(this,arguments);}useEffect(function(){if(confirm.status==='confirm'&&confirm.action==='logout'){removeCookie('access-token');navigate('/signin');setConfirm({active:false,message:'',action:'',status:''});}},[confirm.status]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bottomnav\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bottomnav-hamburger\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\",role:\"button\",tabIndex:0,onClick:function onClick(){setActiveHamburger(!activeHamburger);},onKeyDown:function onKeyDown(){},children:activeHamburger?/*#__PURE__*/_jsx(CloseIcon,{className:\"bottomnav-hamburger-icon\",sx:{fontSize:'2em'}}):/*#__PURE__*/_jsx(MenuIcon,{className:\"bottomnav-hamburger-icon\",sx:{fontSize:'2em'}})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{role:\"button\",tabIndex:0,onClick:function onClick(){logoutAccount();},onKeyDown:function onKeyDown(){},children:/*#__PURE__*/_jsx(LogoutIcon,{className:\"bottomnav-hamburger-icon-logout\",sx:{fontSize:'2em'}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bottomnav-menu \".concat(activeHamburger?'active':''),children:selectMenuForUser(userProfile.role).map(function(data){return/*#__PURE__*/_jsxs(Link,{className:\"bottomnav-menu-item \".concat(isActive===data.path?'active':''),to:data.path,onClick:function onClick(){handleClick(data.path);},children:[/*#__PURE__*/_jsx(data.icon,{className:\"bottomnav-item-icon\",sx:{fontSize:'200%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"bottomnav-item-name\",children:data.name})]},data.name);})})]});}export default BottomNav;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","useCookies","MenuIcon","CloseIcon","LogoutIcon","selectMenuForUser","GetUserProfile","useConfirm","BottomNav","location","navigate","cookies","removeCookie","confirm","setConfirm","activeHamburger","setActiveHamburger","pathname","isActive","setIsActive","username","role","userProfile","setUserProfile","then","res","handleClick","path","logoutAccount","active","message","action","status","fontSize","map","data","name"],"sources":["/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/src/components/bottomnav/BottomNav.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './bottomnav.css';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\n\nimport MenuIcon from '@mui/icons-material/Menu';\nimport CloseIcon from '@mui/icons-material/Close';\nimport LogoutIcon from '@mui/icons-material/Logout';\n\nimport selectMenuForUser from '../../functions/SelectMenuForUser';\nimport { GetUserProfile } from '../../functions/GetData';\n\nimport { useConfirm } from '../../contexts/ConfirmContext';\n\ninterface profile {\n  username: string,\n  role: string\n}\n\nfunction BottomNav() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [cookies, , removeCookie] = useCookies(['access-token']);\n  const { confirm, setConfirm } = useConfirm();\n\n  const [activeHamburger, setActiveHamburger] = useState<boolean>(false);\n  const [isActive, setIsActive] = useState<string>(location.pathname);\n\n  const [userProfile, setUserProfile] = useState<profile>({\n    username: '',\n    role: ''\n  });\n\n  useEffect(() => {\n    GetUserProfile(cookies['access-token']).then((res) => {\n      setUserProfile({\n        username: res.username,\n        role: res.role\n      });\n    });\n  }, []);\n\n  function handleClick(path: string) {\n    setIsActive(path);\n    navigate(path);\n    setActiveHamburger(false);\n  }\n\n  async function logoutAccount() {\n    setConfirm({\n      active: true,\n      message: 'continue sign out ?',\n      action: 'logout',\n      status: ''\n    });\n  }\n\n  useEffect(() => {\n    if (confirm.status === 'confirm' && confirm.action === 'logout') {\n      removeCookie('access-token');\n      navigate('/signin');\n      setConfirm({\n        active: false,\n        message: '',\n        action: '',\n        status: ''\n      });\n    }\n  }, [confirm.status]);\n\n  return (\n    <div className=\"bottomnav\">\n      <div className=\"bottomnav-hamburger\">\n        <div\n          className=\"\"\n          role=\"button\"\n          tabIndex={0}\n          onClick={() => { setActiveHamburger(!activeHamburger); }}\n          onKeyDown={() => {}}\n        >\n          {\n            activeHamburger\n              ? <CloseIcon className=\"bottomnav-hamburger-icon\" sx={{ fontSize: '2em' }} />\n              : <MenuIcon className=\"bottomnav-hamburger-icon\" sx={{ fontSize: '2em' }} />\n          }\n        </div>\n      </div>\n      <div>\n        <div\n          role=\"button\"\n          tabIndex={0}\n          onClick={() => { logoutAccount(); }}\n          onKeyDown={() => {}}\n        >\n          <LogoutIcon className=\"bottomnav-hamburger-icon-logout\" sx={{ fontSize: '2em' }} />\n        </div>\n      </div>\n      <div className={`bottomnav-menu ${activeHamburger ? 'active' : ''}`}>\n        {\n          selectMenuForUser(userProfile.role).map((data) => (\n            <Link\n              className={`bottomnav-menu-item ${isActive === data.path ? 'active' : ''}`}\n              to={data.path}\n              onClick={() => { handleClick(data.path); }}\n              key={data.name}\n            >\n              <data.icon className=\"bottomnav-item-icon\" sx={{ fontSize: '200%' }} />\n              <div className=\"bottomnav-item-name\">{data.name}</div>\n            </Link>\n          ))\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default BottomNav;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}