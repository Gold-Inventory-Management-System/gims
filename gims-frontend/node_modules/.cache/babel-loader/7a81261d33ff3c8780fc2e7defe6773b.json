{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./sidenav.css';import{Link,useLocation,useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import MenuIcon from'@mui/icons-material/Menu';import KeyboardDoubleArrowLeftIcon from'@mui/icons-material/KeyboardDoubleArrowLeft';import AccountCircleIcon from'@mui/icons-material/AccountCircle';import LogoutIcon from'@mui/icons-material/Logout';import selectMenuForUser from'../../functions/SelectMenuForUser';import{GetUserProfile}from'../../functions/GetData';import{useSideNavWidth}from'../../contexts/SideNavWidthContext';import{useConfirm}from'../../contexts/ConfirmContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SideNav(){var location=useLocation();var navigate=useNavigate();var _useCookies=useCookies(['access-token']),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],removeCookie=_useCookies2[2];var _useSideNavWidth=useSideNavWidth(),sideNavWidth=_useSideNavWidth.sideNavWidth,setSideNavWidth=_useSideNavWidth.setSideNavWidth;var _useConfirm=useConfirm(),confirm=_useConfirm.confirm,setConfirm=_useConfirm.setConfirm;var _useState=useState(sideNavWidth==='expand'),_useState2=_slicedToArray(_useState,2),isWide=_useState2[0],setIsWide=_useState2[1];var _useState3=useState(location.pathname),_useState4=_slicedToArray(_useState3,2),isActive=_useState4[0],setIsActive=_useState4[1];var _useState5=useState({username:'username',role:'admin'}),_useState6=_slicedToArray(_useState5,2),userProfile=_useState6[0],setUserProfile=_useState6[1];useEffect(function(){GetUserProfile(cookies['access-token']).then(function(res){setUserProfile({username:res.username,role:res.role});});},[]);function handleClick(path){setIsActive(path);}function expandSidenavClick(wide){setIsWide(wide);setSideNavWidth(wide?'expand':'short');}function logoutAccount(){return _logoutAccount.apply(this,arguments);}function _logoutAccount(){_logoutAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setConfirm({active:true,message:'continue sign out ?',action:'logout',status:''});case 1:case\"end\":return _context.stop();}}},_callee);}));return _logoutAccount.apply(this,arguments);}useEffect(function(){if(confirm.status==='confirm'&&confirm.action==='logout'){removeCookie('access-token');navigate('/signin');setConfirm({active:false,message:'',action:'',status:''});}},[confirm.status]);useEffect(function(){window.addEventListener('resize',function(){setIsWide(window.innerWidth>1024);});setSideNavWidth(isWide?'expand':'short');},[isWide]);return/*#__PURE__*/_jsxs(\"div\",{className:\"sidenav \".concat(isWide?'':'short'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidenav-hamburg \".concat(isWide?'':'short'),onClick:function onClick(){expandSidenavClick(!isWide);},onKeyDown:function onKeyDown(){},role:\"button\",tabIndex:0,children:isWide?/*#__PURE__*/_jsx(KeyboardDoubleArrowLeftIcon,{sx:{fontSize:40}}):/*#__PURE__*/_jsx(MenuIcon,{sx:{fontSize:40}})}),/*#__PURE__*/_jsx(\"div\",{className:\"sidenav-header \".concat(isWide?'':'short'),children:/*#__PURE__*/_jsx(\"div\",{children:\"g.i.m.s.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"sidenav-menu\",children:selectMenuForUser(userProfile.role).map(function(data){return/*#__PURE__*/_jsxs(Link,{className:\"sidenav-menu-item \".concat(isActive===data.path?'active':''),to:data.path,onClick:function onClick(){handleClick(data.path);},children:[/*#__PURE__*/_jsx(data.icon,{className:\"icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:data.name}),/*#__PURE__*/_jsx(\"div\",{className:\"tooltip\",children:data.name})]},data.name);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidenav-account\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"account-box\",children:[/*#__PURE__*/_jsx(AccountCircleIcon,{className:\"account-icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"account-name\",children:userProfile.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"account-logout\",onClick:function onClick(){logoutAccount();},onKeyDown:function onKeyDown(){},role:\"button\",tabIndex:0,children:[/*#__PURE__*/_jsx(LogoutIcon,{className:\"logout-icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tooltip\",children:\"logout\"})]})]})]});}export default SideNav;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","useCookies","MenuIcon","KeyboardDoubleArrowLeftIcon","AccountCircleIcon","LogoutIcon","selectMenuForUser","GetUserProfile","useSideNavWidth","useConfirm","SideNav","location","navigate","cookies","removeCookie","sideNavWidth","setSideNavWidth","confirm","setConfirm","isWide","setIsWide","pathname","isActive","setIsActive","username","role","userProfile","setUserProfile","then","res","handleClick","path","expandSidenavClick","wide","logoutAccount","active","message","action","status","window","addEventListener","innerWidth","fontSize","map","data","name"],"sources":["/Users/chalanthornaenguthaivadt/Desktop/final_thesis/gims/gims-frontend/src/components/sidenav/SideNav.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './sidenav.css';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\n\nimport MenuIcon from '@mui/icons-material/Menu';\nimport KeyboardDoubleArrowLeftIcon from '@mui/icons-material/KeyboardDoubleArrowLeft';\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\nimport LogoutIcon from '@mui/icons-material/Logout';\n\nimport selectMenuForUser from '../../functions/SelectMenuForUser';\nimport { GetUserProfile } from '../../functions/GetData';\n\nimport { useSideNavWidth } from '../../contexts/SideNavWidthContext';\nimport { useConfirm } from '../../contexts/ConfirmContext';\n\ninterface profile {\n  username: string,\n  role: string\n}\n\nfunction SideNav() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [cookies, , removeCookie] = useCookies(['access-token']);\n  const { sideNavWidth, setSideNavWidth } = useSideNavWidth();\n  const { confirm, setConfirm } = useConfirm();\n\n  const [isWide, setIsWide] = useState<boolean>(sideNavWidth === 'expand');\n  const [isActive, setIsActive] = useState<string>(location.pathname);\n\n  const [userProfile, setUserProfile] = useState<profile>({\n    username: 'username',\n    role: 'admin'\n  });\n\n  useEffect(() => {\n    GetUserProfile(cookies['access-token']).then((res) => {\n      setUserProfile({\n        username: res.username,\n        role: res.role\n      });\n    });\n  }, []);\n\n  function handleClick(path: string) {\n    setIsActive(path);\n  }\n\n  function expandSidenavClick(wide: boolean) {\n    setIsWide(wide);\n    setSideNavWidth(wide ? 'expand' : 'short');\n  }\n\n  async function logoutAccount() {\n    setConfirm({\n      active: true,\n      message: 'continue sign out ?',\n      action: 'logout',\n      status: ''\n    });\n  }\n\n  useEffect(() => {\n    if (confirm.status === 'confirm' && confirm.action === 'logout') {\n      removeCookie('access-token');\n      navigate('/signin');\n      setConfirm({\n        active: false,\n        message: '',\n        action: '',\n        status: ''\n      });\n    }\n  }, [confirm.status]);\n\n  useEffect(() => {\n    window.addEventListener('resize', () => {\n      setIsWide(window.innerWidth > 1024);\n    });\n    setSideNavWidth(isWide ? 'expand' : 'short');\n  }, [isWide]);\n\n  return (\n    <div className={`sidenav ${isWide ? '' : 'short'}`}>\n      {/* -- Expand&Short button -- */}\n      <div\n        className={`sidenav-hamburg ${isWide ? '' : 'short'}`}\n        onClick={() => { expandSidenavClick(!isWide); }}\n        onKeyDown={() => {}}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {\n          isWide\n            ? <KeyboardDoubleArrowLeftIcon sx={{ fontSize: 40 }} />\n            : <MenuIcon sx={{ fontSize: 40 }} />\n        }\n      </div>\n      {/* -- Header -- */}\n      <div className={`sidenav-header ${isWide ? '' : 'short'}`}>\n        <div>g.i.m.s.</div>\n      </div>\n      {/* -- Menu content -- */}\n      <div className=\"sidenav-menu\">\n        {\n          selectMenuForUser(userProfile.role).map((data) => (\n            <Link\n              className={`sidenav-menu-item ${isActive === data.path ? 'active' : ''}`}\n              to={data.path}\n              onClick={() => { handleClick(data.path); }}\n              key={data.name}\n            >\n              <data.icon className=\"icon\" />\n              <div className=\"name\">{data.name}</div>\n              <div className=\"tooltip\">{data.name}</div>\n            </Link>\n          ))\n        }\n      </div>\n      {/* -- Account content -- */}\n      <div className=\"sidenav-account\">\n        <div className=\"account-box\">\n          <AccountCircleIcon className=\"account-icon\" />\n          <div className=\"account-name\">{userProfile.username}</div>\n        </div>\n        <div\n          className=\"account-logout\"\n          onClick={() => { logoutAccount(); }}\n          onKeyDown={() => {}}\n          role=\"button\"\n          tabIndex={0}\n        >\n          <LogoutIcon className=\"logout-icon\" />\n          <div className=\"tooltip\">logout</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default SideNav;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}